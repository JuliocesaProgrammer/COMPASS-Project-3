<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Consulta de Lojas</title>
</head>
<body>
  <h1>Consultar Lojas e Frete</h1>
  <form id="cepForm">
    <input type="text" id="cepInput" placeholder="Digite o CEP" required>
    <button type="submit">Consultar</button>
  </form>

  <div id="results"></div>

  <script>
    document.getElementById('cepForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const cep = document.getElementById('cepInput').value;
      const response = await fetch(`http://localhost:3000/stores/cep/${cep}`);
      const data = await response.json();

      const resultDiv = document.getElementById('results');
      resultDiv.innerHTML = '';

      data.stores.forEach(store => {
        const div = document.createElement('div');
        div.style.border = '1px solid #ccc';
        div.style.margin = '10px 0';
        div.style.padding = '10px';
        div.style.borderRadius = '8px';

        const frete = store.value[0]; // Pega o primeiro valor, pode ajustar lógica depois

        div.innerHTML = `
          <strong>${store.name}</strong><br>
          Distância: ${store.distance}<br>
          Valor do Frete: ${frete.price}
        `;

        resultDiv.appendChild(div);
      });
    });
  </script>
</body>
</html>
